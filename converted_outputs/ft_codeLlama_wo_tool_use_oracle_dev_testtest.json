[
  {
    "instance_id": "sqlfluff__sqlfluff-2862",
    "model_patch": "\nfix keep adding new line on wrong place \n### Search before asking\n\n- [X] I searched the [issues](https://github.com/sqlfluff/sqlfliff/issues) and found no similar issues.\n\n\n### What Happened\n\nTo replicate this issue you can create a file eg. test.template.sql \n\n```\n{% if true %}\nSELECT 1 + 1\n{%- endif %}\n```\n\nthen run:\n```\nsqlfluff fix test.template.sql  \n```\n\nThis will give you:\n```\nL:   2 | P:  12 | L009 | Files must end with a trailing newline.\n```\n\nAnd the result of the file is now:\n```\n{% if true %}\nSELECT 1 + 1\n\n{%- endif %}\n```\n\nIf i run it again it will complain on the same issue and the result of the file would be: \n```\n{% if true %}\nSELECT 1 + 1\n\n\n{%- endif %}\n```\n\nAnd so on. \n\n### Expected Behaviour\n\nThe expected behavior would be to add the new line at the end of the file, that is after `{%- endif %}` instead of adding the new line at the end of the SQL query - so the result should look like this: \n\n```\n{% if true %}\nSELECT 1 + 1\n{%- endif %}\n\n```\n\n### Observed Behaviour\n\nAdds a new line to the end of the SQL query instead of in the end of the file. \n\n### How to reproduce\n\nAlready mentioned above (in What Happened section).\n\n### Dialect\n\nsnowflake\n\n### Version\n\nsqlfluff, version 0.6.2\n\n### Configuration\n\n[sqlfluff]\nverbose = 1\ndialect = snowflake\ntemplater = jinja\nexclude_rules = L027,L031,L032,L036,L044,L046,L034\noutput_line_length = 121\nsql_file_exts=.sql\n\n[sqlfluff:rules]\ntab_space_size = 4\nmax_line_length = 250\nindent_unit = space\ncomma_style = trailing\nallow_scalar = True\nsingle_table_references = consistent\nunquoted_identifiers_policy = aliases\n\n\n[sqlfluff:rules:L010]  # Keywords\ncapitalisation_policy = upper\n\n[sqlfluff:rules:L014]\nextended_capitalisation_policy = lower\n\n[sqlfluff:rules:L030]  # function names\ncapitalisation_policy = upper\n\n### Are you willing to work on and submit a PR to address the issue?\n\n- [ ] Yes I am willing to submit a PR!\n\n### Code of Conduct\n\n- [X] I agree to follow this project's [Code of Conduct](https://github.com/sqlfluff/sqlfluff/blob/main/CODE_OF_CONDUCT.md)\n\n\n",
    "model_name_or_path": "ft:gpt-4o-mini-2024-07-18:personal:toolformer-mistral:AfWBG2x5"
  },
  {
    "instance_id": "sqlfluff__sqlfluff-4151",
    "model_patch": "Usage: sqlfluff fix [OPTIONS] [PATHS]...\n        Try 'sqlfluff fix -h' for help.\n\n        Error: No such option: --disable_progress_bar (Possible options: --disable-noqa, --disable-progress-bar)\n",
    "model_name_or_path": "ft:gpt-4o-mini-2024-07-18:personal:toolformer-mistral:AfWBG2x5"
  }
]